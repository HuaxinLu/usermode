AC_INIT(usermode.spec)
AM_INIT_AUTOMAKE(usermode,`awk '/^Version:/ { print $$2 }' usermode.spec`)
AC_PROG_CC
ALL_LINGUAS="bs cs da de es eu_ES fi fr gl hu id is it ja ko no pl pt_BR pt ro ru sk sl sr sv tr uk wa zh_CN.GB2312 zh"
AM_GNU_GETTEXT
PKG_CHECK_MODULES(GLIB,glib-2.0)
PKG_CHECK_MODULES(LIBGLADE,libglade-2.0)
AM_CONFIG_HEADER(config.h)
AC_CHECK_FUNC(pam_start,,[AC_CHECK_LIB(pam,pam_start,PAM_LIBS="-lpam -ldl",dl)])
AC_CHECK_FUNC(misc_conv,,[AC_CHECK_LIB(pam_misc,misc_conv,PAM_LIBS="-lpam_misc $PAM_LIBS",$PAM_LIBS)])
AC_CHECK_FUNC(pwdb_start,,[AC_CHECK_LIB(pwdb,pwdb_start,PAM_LIBS="-lpwdb $PAM_LIBS",$PAM_LIBS)])
AC_SUBST(PAM_LIBS)

DATADIR=`eval echo ${datadir}`
AC_DEFINE(GTK_DISABLE_DEPRECATED,,[Disable use of deprecated GTK APIs.])
AC_DEFINE_UNQUOTED(DATADIR,"$DATADIR","/usr/share")
SYSCONFDIR=`eval echo ${sysconfdir}`
AC_DEFINE_UNQUOTED(SYSCONFDIR,"$SYSCONFDIR","/etc")

AC_OUTPUT(Makefile intl/Makefile po/Makefile.in)
